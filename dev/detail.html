<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta property="og:image" content="이미지" />
    <meta property="og:url" content="유알엘" />
    <meta property="og:description" content="디스크립션" />
    <meta property="og:title" content="타이틀" />
    <link
      href="https://fonts.googleapis.com/css?family=Raleway:300,400,600,900,900i&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./assets/plugins/slick/slick.css" />
    <link
      rel="stylesheet"
      href="./assets/plugins/rangeSlider/css/ion.rangeSlider.min.css"
    />
    <link rel="stylesheet" href="./assets/css/main.css" />
    <title>beatsomeone</title>
  </head>
  <body>
    <div class="wrapper">
      @@include('include/header.html')
      <div class="container detail">
        <div class="detail__header">
          <div class="wrap">
            <div class="detail__music">
              <div class="detail__music-img">
                <img src="https://via.placeholder.com/190x190" alt="" />
              </div>
              <div class="detail__music-info">
                <h2 class="title">Shooting Stars</h2>
                <p class="singer">Black Mayo</p>
                <div class="state">
                  <span class="play">547</span>
                  <span class="song">120</span>
                  <span class="registed">May 20</span>
                  <span class="etc"
                    >Free Downloads: Tagged || Non -Exclusive/Stems/Exclusive:
                    Untagged</span
                  >
                </div>
                <div class="utils">
                  <div class="utils__info">
                    <a href="" class="buy"><span>$20.00</span></a>
                    <span class="cart">700</span>
                    <span class="talk">412</span>
                    <span class="share">179</span>
                    <span class="atob">91</span>
                  </div>
                  <div class="category">
                    <span>Acoustic Folk</span>
                    <span>Jazz</span>
                    <span>Ambient</span>
                    <span>Folk</span>
                    <span>Singer-Songwriter</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="detail__player">
              <button class="detail__player-controller"></button>
              <div id="detail__player-wave">
                <!-- wave 들어가는 부분-->
              </div>
            </div>
            <div class="detail__comment">
              <form action="">
                <div class="comment">
                  <a href="" class="comment__user"></a>
                  <input
                    type="text"
                    placeholder="Write a comment..."
                    id="comment"
                    max="200"
                  />
                  <span id="commentLength">0/200</span>
                  <button>SEND</button>
                </div>
              </form>
            </div>
          </div>
        </div>
        <div class="detail__body">
          <div class="wrap">
            <div class="tab">
              <button class="active">
                SIMILAR TRACKS
              </button>
              <button>
                COMMENTS
              </button>
              <button>
                INFORMATION
              </button>
            </div>

            <div class="detail__content">
              <div class="playList">
                <ul id="playList__list" class="playList__list">
                  <!-- 플레이리스트 들어감 -->
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      @@include('./include/footer.html')
    </div>
    <script src="./assets/plugins/jquery.js"></script>
    <script src="./assets/plugins/underscore.js"></script>
    <script src="https://unpkg.com/wavesurfer.js"></script>
    <script src="./assets/plugins/slick/slick.js"></script>
    <script src="./assets/plugins/rangeSlider/js/ion.rangeSlider.js"></script>
    <script src="./assets/js/build.js"></script>
    <!-- playlist item 템플릿 문자열 -->
    <script type="text/template" id="playListTemplate">
      <li class="playList__itembox" id="playList__item<%- item.id %>">
        <div class="playList__item playList__item--title">
          <div class="col favorite">
            <button>즐겨찾기</button>
          </div>
          <div class="col name">
            <figure>
              <span class="playList__cover">
                <img
                  src="<%- item.coverImg %>"
                  alt=""
                />
                <% if ( item.isNew === true ) { %>
                <i class="label new">N</i>
                <% } %>
              </span>
              <figcaption>
                <h3 class="playList__title">
                  <%- item.title %>
                </h3>
                <span class="playList__by"><%- item.singer %></span>
              </figcaption>
            </figure>
          </div>
          <div class="col genre">
            <% item.genres.forEach(function(genre, index){ %>
            <button class="<%- genre.active && 'active' %>"><%- genre.title %></button>
            <% }) %>
          </div>
          <div class="col playbtn">
            <button class="btn-play" data-action="playAction<%- item.id %>">재생</button>
            <span class="timer">
              <span class="current"></span>
              <span class="duration">0:00</span>
            </span>
          </div>
          <div class="col spectrum">
            <div class="wave"></div>
          </div>
          <div class="col utils">
            <a href="" class="cart">
              장바구니
              <span class="tooltip">$20.00</span>
            </a>
            <a href="" class="download">다운로드</a>
            <a href="" class="shared">공유하기</a>
          </div>
          <div class="col more">
            <button>
              more
              <span class="tooltip">
                <a href="">action1</a>
                <a href="">action2</a>
                <a href="">action3</a>
              </span>
            </button>
          </div>
        </div>
      </li>
    </script>

    <script>
      _.templateSettings.variable = "item";
      var template = _.template($("#playListTemplate").text());
      var playList = [
        {
          id: 1,
          coverImg: "https://via.placeholder.com/55x55",
          isNew: true,
          title: "Celebration (Buy 1 Get 3 FR...",
          singer: "by Diamond Style",
          genres: [
            {
              active: true,
              title: "All Genre"
            },
            {
              active: true,
              title: "Jaz"
            },
            {
              active: false,
              title: "Amb"
            },
            {
              active: false,
              title: "Fol"
            },
            {
              active: false,
              title: "Singer-Songwriter"
            }
          ],
          audioFile: "./assets/audio/testfile.mp3"
        },
        {
          id: 2,
          coverImg: "https://via.placeholder.com/55x55",
          isNew: true,
          title: "EMOTIONS",
          singer: "by Mvrio",
          genres: [
            {
              active: true,
              title: "Acoustic Folk"
            },
            {
              active: true,
              title: "Electronic"
            },
            {
              active: false,
              title: "Amb"
            },
            {
              active: false,
              title: "Fol"
            },
            {
              active: false,
              title: "Singer-Songwriter"
            }
          ],
          audioFile: "./assets/audio/testfile.mp3",
          subPlayList: []
        },
        {
          id: 3,
          coverImg: "https://via.placeholder.com/55x55",
          isNew: true,
          title: "Aishiteru (Dean Lo-Fi Inst...",
          singer: "by Roko Tensei",
          genres: [
            {
              active: true,
              title: "Hip Hop"
            },
            {
              active: false,
              title: "Jaz"
            },
            {
              active: false,
              title: "Amb"
            },
            {
              active: false,
              title: "Fol"
            },
            {
              active: false,
              title: "World"
            }
          ],
          audioFile: "./assets/audio/testfile.mp3",
          subPlayList: []
        },
        {
          id: 4,
          coverImg: "https://via.placeholder.com/55x55",
          isNew: true,
          title: "Sad Acoustic Guitar",
          singer: "Ryini Beats",
          genres: [
            {
              active: true,
              title: "Acoustic Folk"
            },
            {
              active: false,
              title: "Jaz"
            },
            {
              active: false,
              title: "Free Beats"
            }
          ],
          audioFile: "./assets/audio/testfile.mp3",
          subPlayList: []
        },
        {
          id: 8,
          coverImg: "https://via.placeholder.com/55x55",
          isNew: true,
          title: "Sky Red",
          singer: "by Ant Chamberlain",
          genres: [
            {
              active: true,
              title: "K-Pop"
            },
            {
              active: true,
              title: "Country"
            },
            {
              active: false,
              title: "Amb"
            },
            {
              active: false,
              title: "K-Pop"
            },
            {
              active: false,
              title: "Singer-Songwriter"
            }
          ],
          audioFile: "./assets/audio/testfile.mp3"
        },
        {
          id: 13,
          coverImg: "https://via.placeholder.com/55x55",
          isNew: true,
          title: "Malibu",
          singer: "by Mvrio",
          genres: [
            {
              active: false,
              title: "Fol"
            },
            {
              active: false,
              title: "Singer-Songwriter"
            }
          ],
          audioFile: "./assets/audio/testfile.mp3"
        },
        {
          id: 24,
          coverImg: "https://via.placeholder.com/55x55",
          isNew: true,
          title: "Sky Red_breathe-no bac...",
          singer: "by Ant Chamberlain",
          genres: [
            {
              active: true,
              title: "Reggae"
            },
            {
              active: true,
              title: "R&B"
            },
            {
              active: false,
              title: "Amb"
            },
            {
              active: false,
              title: "Fol"
            },
            {
              active: false,
              title: "Singer-Songwriter"
            }
          ],
          audioFile: "./assets/audio/testfile.mp3"
        }
      ];

      renderPlaylistNoDepth(playList);

      document.getElementById("comment").addEventListener("keyup", function(e) {
        document.getElementById("commentLength").innerText =
          e.target.value.length + "/200";
      });
      var playbtn = document.querySelector(".detail__player-controller");
      document.addEventListener("DOMContentLoaded", function() {
        var music = WaveSurfer.create({
          container: document.querySelector("#detail__player-wave"),
          waveColor: "#696969",
          progressColor: "#c3ac45",
          hideScrollbar: true,
          barWidth: 5,
          barRadius: 2,
          barGap: 2,
          height: 200
        });
        music.load("./assets/audio/testfile.mp3");
        music.on("play", function(e) {
          playbtn.classList.add("playing");
        });
        music.on("pause", function(e) {
          playbtn.classList.remove("playing");
        });
        playbtn.addEventListener("click", function() {
          music.playPause();
        });
      });
    </script>
  </body>
</html>
